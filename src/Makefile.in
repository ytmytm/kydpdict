
PACKAGE_NAME=@PACKAGE_NAME@
PACKAGE_VERSION=@PACKAGE_VERSION@
CC=@CC@
CXX=@CXX@
CXXFLAGS=@CXXFLAGS@ -Wall -DVERSION=\"$(PACKAGE_VERSION)\"
MOC=@MOC@
LUPDATE=@LUPDATE@
LRELEASE=@LRELEASE@
QT_LIB=@QT_LIB@
QT_LIBS=@QT_LDFLAGS@
QT_INCLUDE=@QT_INCLUDES@
X_CFLAGS=@X_CFLAGS@
X_LIBS=@X_LIBS@
X_LIB=@X_LIB@
HAVE_X11=@HAVE_X11@
prefix=@prefix@
exec_prefix=@exec_prefix@
bindir=@bindir@
datadir=@datadir@

LOCALEDIR=$(datadir)/$(PACKAGE_NAME)
KYDPDATADIR=$(datadir)/$(PACKAGE_NAME)/

# Do not touch below and above this line

OBJECTS = kdynamictip.cpp kydpconfig.cpp kydpdict.cpp main.cpp ydpdictionary.cpp ydpconfigure.cpp

OOBJECTS = main.o kydpconfig.o kdynamictip.o kydpdict.o ydpdictionary.o ydpdictionary.moc.o \
	ydpconfigure.o ydpconfigure.moc.o kydpdict.moc.o

ifeq ($(HAVE_X11),yes)
OBJECTS  += dock_widget.cpp
OOBJECTS += dock_widget.o dock_widget.moc.o
endif

ifeq (.depend,$(wildcard .depend))
all : 	kydpdict translation
include .depend
else
all:	depend
	@$(MAKE) all
endif

main.o:
		$(CXX) -c main.cpp $(QT_INCLUDE) $(CXXFLAGS) -DLOCALEDIR=\"$(LOCALEDIR)\"

kydpdict.moc.o: kydpdict.h
		$(MOC) kydpdict.h -o kydpdict.moc.cpp
		$(CXX) -c kydpdict.moc.cpp $(QT_INCLUDE) $(CXXFLAGS)

kydpdict.o:
		$(CXX) -c kydpdict.cpp $(X_CFLAGS) $(QT_INCLUDE) $(CXXFLAGS)

ydpdictionary.o: tips.h
		$(CXX) -c ydpdictionary.cpp $(QT_INCLUDE) $(CXXFLAGS)

ydpdictionary.moc.o: ydpdictionary.h
		$(MOC) ydpdictionary.h -o ydpdictionary.moc.cpp
		$(CXX) -c ydpdictionary.moc.cpp $(QT_INCLUDE) $(CXXFLAGS)

ydpconfigure.o:
		$(CXX) -c ydpconfigure.cpp $(QT_INCLUDE) $(CXXFLAGS)

ydpconfigure.moc.o: ydpconfigure.h
		$(MOC) ydpconfigure.h -o ydpconfigure.moc.cpp
		$(CXX) -c ydpconfigure.moc.cpp $(QT_INCLUDE) $(CXXFLAGS)

kydpconfig.o:
		$(CXX) -c kydpconfig.cpp $(QT_INCLUDE) $(CXXFLAGS) -DKYDPDATADIR=\"$(KYDPDATADIR)\"

kdynamictip.o:
		$(CXX) -c kdynamictip.cpp $(QT_INCLUDE) $(CXXFLAGS)

ifeq ($(HAVE_X11),yes)
dock_widget.o:
		$(CXX) -c dock_widget.cpp $(X_CFLAGS) $(QT_INCLUDE) $(CXXFLAGS)

dock_widget.moc.o: dock_widget.h
		$(MOC) dock_widget.h -o dock_widget.moc.cpp
		$(CXX) -c dock_widget.moc.cpp $(QT_INCLUDE) $(CXXFLAGS)
endif

kydpdict: 	$(OOBJECTS)
		$(CXX) $(OOBJECTS) $(QT_LIBS) $(QT_LIB) $(X_LIBS) $(X_LIB) $(CXXFLAGS) -o kydpdict

translation: kydpdict.pro
	$(LUPDATE) kydpdict.pro
	$(LRELEASE) kydpdict.pro

install: kydpdict
		install -s -m 755 kydpdict $(DESTDIR)$(bindir)
		install -m 755 -d $(DESTDIR)$(LOCALEDIR)
		install -m 755 -d $(DESTDIR)$(KYDPDATADIR)
		install -m 644 kydpdict_pl.qm $(DESTDIR)$(LOCALEDIR)

clean:
		-rm *.o *.moc.cpp *.qm .depend
		-rm kydpdict

distclean: clean
		-rm Makefile

depend dep:	$(OBJECTS:.o=.cpp)
	@echo "Creating dependency information"
	$(CC) -MM -MG $(X_CFLAGS) $(QT_INCLUDE) $^ > .depend
